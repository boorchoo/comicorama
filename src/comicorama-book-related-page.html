<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout.html">

<link rel="import" href="comicorama-page-behavior.html">
<link rel="import" href="comicorama-common-behavior.html">

<link rel="import" href="comicorama-styles.html">

<dom-module id="comicorama-book-related-page">
  <template>
    <style include="comicorama-styles iron-flex iron-flex-alignment iron-positioning">
      :host {
        display: block;
        @apply(--layout-fit);
        overflow: auto;

        --comicorama-list-item-width: 105px;
        --comicorama-list-item-height: 148.5px;
        --comicorama-list-item-margin: 4px;
      }
    </style>

    <div class="comicorama-book-section-title">Related<iron-icon class="comicorama-book-section-close" icon="icons:close" on-tap="close"></iron-icon></div>
    <comicorama-list disabled="{{offscreen}}">
      <template is="dom-repeat" items="[[data.related_book]]">
        <comicorama-list-item front-cover="[[getBookCover(item)]]" back-cover="[[getBookCover(item)]]" route-path="[[getBookRoutePath(item)]]"></comicorama-list-item>
      </template>
    </comicorama-list>
  </template>

  <script>
    Polymer({
      is: 'comicorama-book-related-page',
      properties: {
        animationConfig: {
          value: function() {
            return {
              'entry': {
                name: 'slide-from-right-animation',
                node: this,
                timing: {
                  duration: 1000
                }
              },
              'exit': {
                name: 'fade-out-animation',
                node: this,
                timing: {
                  duration: 1000
                }
              }
            };
          }
        }
      },
      behaviors: [
        ComicoramaPageBehavior,
        ComicoramaCommonBehavior
      ],
      close: function() {
        this.fire('comicorama-change-route', {
          path: '#menu'
        });
      }
    });
  </script>
</dom-module>